# ğŸ–¥ï¸ Synology NAS ê°œë°œ ì„œë²„ ì„¤ì • ê°€ì´ë“œ

ë¡œì»¬í˜¸ìŠ¤íŠ¸ì™€ Synology NAS ê°„ ê°œë°œ í™˜ê²½ì„ ì†ì‰½ê²Œ ì „í™˜í•˜ëŠ” ë°©ë²•

---

## ğŸ“‹ ëª©ì°¨

1. [í™˜ê²½ ê°œìš”](#í™˜ê²½-ê°œìš”)
2. [ì‚¬ì „ ì¤€ë¹„](#ì‚¬ì „-ì¤€ë¹„)
3. [NAS ì„¤ì •](#nas-ì„¤ì •)
4. [ì‚¬ìš© ë°©ë²•](#ì‚¬ìš©-ë°©ë²•)
5. [íŠ¸ëŸ¬ë¸”ìŠˆíŒ…](#íŠ¸ëŸ¬ë¸”ìŠˆíŒ…)

---

## ğŸ¯ í™˜ê²½ ê°œìš”

### ì§€ì› í™˜ê²½

| í™˜ê²½ | ì„¤ëª… | ì ‘ê·¼ URL | ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤ |
|------|------|----------|---------------|
| **localhost** | ë¡œì»¬ PCì—ì„œ ì‹¤í–‰ | `http://localhost:3000` | ê°œì¸ PCì—ì„œ ê°œë°œ |
| **NAS** | Synology NASì—ì„œ ì‹¤í–‰ | `http://[NAS-IP]:3000` | ë„¤íŠ¸ì›Œí¬ ë‚´ ë‹¤ë¥¸ ê¸°ê¸°ì—ì„œ ì ‘ê·¼ |

### í™˜ê²½ íŒŒì¼ êµ¬ì¡°

```
corp-kanban/
â”œâ”€â”€ .env.local      # localhost í™˜ê²½ ì„¤ì •
â”œâ”€â”€ .env.nas        # NAS í™˜ê²½ ì„¤ì •
â”œâ”€â”€ .env            # í˜„ì¬ í™œì„± í™˜ê²½ (ìë™ ìƒì„±)
â””â”€â”€ .env.example    # í…œí”Œë¦¿
```

---

## ğŸ› ï¸ ì‚¬ì „ ì¤€ë¹„

### 1. Synology NAS ìš”êµ¬ì‚¬í•­

- **DSM ë²„ì „**: 7.0 ì´ìƒ
- **íŒ¨í‚¤ì§€**: Node.js 18+ ì„¤ì¹˜ í•„ìš”
- **ë©”ëª¨ë¦¬**: ìµœì†Œ 2GB RAM
- **í¬íŠ¸**: 3000ë²ˆ í¬íŠ¸ ê°œë°©

### 2. Node.js ì„¤ì¹˜ (NAS)

1. **íŒ¨í‚¤ì§€ ì„¼í„°** ì—´ê¸°
2. **Node.js** ê²€ìƒ‰ ë° ì„¤ì¹˜
3. ë²„ì „ í™•ì¸:
```bash
node --version  # v18.0.0 ì´ìƒ
npm --version   # v9.0.0 ì´ìƒ
```

### 3. NAS IP ì£¼ì†Œ í™•ì¸

**DSM ì œì–´íŒ** â†’ **ë„¤íŠ¸ì›Œí¬** â†’ **ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤**

ì˜ˆì‹œ: `192.168.0.100`

---

## ğŸ”§ NAS ì„¤ì •

### Step 1: í”„ë¡œì íŠ¸ ë³µì‚¬

#### ë°©ë²• A: Git Clone (ê¶Œì¥)

```bash
# NAS SSH ì ‘ì†
ssh admin@192.168.0.100

# í”„ë¡œì íŠ¸ ë””ë ‰í† ë¦¬ë¡œ ì´ë™
cd /volume1/web

# Git Clone
git clone https://github.com/shawntony/actauto.git
cd actauto/corp-kanban
```

#### ë°©ë²• B: íŒŒì¼ ìŠ¤í…Œì´ì…˜

1. **File Station** ì—´ê¸°
2. `web` í´ë” ìƒì„± (ì—†ìœ¼ë©´)
3. Windowsì—ì„œ í”„ë¡œì íŠ¸ í´ë”ë¥¼ NASë¡œ ë³µì‚¬

### Step 2: ì˜ì¡´ì„± ì„¤ì¹˜

```bash
# NAS SSH ë˜ëŠ” Task Schedulerì—ì„œ
cd /volume1/web/actauto/corp-kanban
npm install
```

### Step 3: í™˜ê²½ íŒŒì¼ ì„¤ì •

#### `.env.nas` íŒŒì¼ ìˆ˜ì •

```bash
nano .env.nas
```

**ì¤‘ìš”**: NAS IP ì£¼ì†Œë¥¼ ì‹¤ì œ ê°’ìœ¼ë¡œ ë³€ê²½

```env
# NAS IP ì£¼ì†Œë¡œ ë³€ê²½ â¬‡ï¸
NEXT_PUBLIC_API_URL=http://192.168.0.100:3000

# NAS ì„¤ì •
NAS_HOST=192.168.0.100  # ì‹¤ì œ NAS IP
NAS_PORT=3000
```

### Step 4: ë°©í™”ë²½ ì„¤ì •

**DSM ì œì–´íŒ** â†’ **ë³´ì•ˆ** â†’ **ë°©í™”ë²½**

1. ê·œì¹™ ìƒì„±
2. í¬íŠ¸: `3000`
3. í”„ë¡œí† ì½œ: `TCP`
4. ì†ŒìŠ¤: `LAN` (ë˜ëŠ” íŠ¹ì • IP)

### Step 5: Task Scheduler ì„¤ì • (ìë™ ì‹œì‘)

1. **ì œì–´íŒ** â†’ **ì‘ì—… ìŠ¤ì¼€ì¤„ëŸ¬**
2. **ìƒì„±** â†’ **ì˜ˆì•½ëœ ì‘ì—…** â†’ **ì‚¬ìš©ì ì •ì˜ ìŠ¤í¬ë¦½íŠ¸**
3. ì„¤ì •:

```bash
ì¼ë°˜:
- ì‘ì—…: Next.js Dev Server
- ì‚¬ìš©ì: root
- í™œì„±í™”ë¨: âœ…

ìŠ¤ì¼€ì¤„:
- ë¶€íŒ… ì‹œ ì‹¤í–‰

ì‘ì—… ì„¤ì •:
cd /volume1/web/actauto/corp-kanban
npm run dev:nas
```

---

## ğŸš€ ì‚¬ìš© ë°©ë²•

### ë°©ë²• 1: NPM ìŠ¤í¬ë¦½íŠ¸ ì‚¬ìš© (ê¶Œì¥)

#### localhostì—ì„œ ì‹¤í–‰

```bash
# Windows PowerShell ë˜ëŠ” CMD
cd C:\Users\gram\myautomation\actauto\corp-kanban

# localhost í™˜ê²½ìœ¼ë¡œ ì‹¤í–‰
npm run dev:local
```

#### NASì—ì„œ ì‹¤í–‰

```bash
# NAS SSH
cd /volume1/web/actauto/corp-kanban

# NAS í™˜ê²½ìœ¼ë¡œ ì‹¤í–‰ (ëª¨ë“  ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤ ë°”ì¸ë”©)
npm run dev:nas
```

### ë°©ë²• 2: í™˜ê²½ ìˆ˜ë™ ì „í™˜

```bash
# localhostë¡œ ì „í™˜
npm run switch:local
npm run dev

# NASë¡œ ì „í™˜
npm run switch:nas
npm run dev
```

### ë°©ë²• 3: í”„ë¡œë•ì…˜ ë¹Œë“œ ì‹¤í–‰

```bash
# ë¹Œë“œ
npm run build

# localhost ì‹œì‘
npm start

# NAS ì‹œì‘ (ë„¤íŠ¸ì›Œí¬ ì ‘ê·¼ í—ˆìš©)
npm run start:nas
```

---

## ğŸŒ ì ‘ê·¼ ë°©ë²•

### localhost í™˜ê²½

- **ë¸Œë¼ìš°ì €**: `http://localhost:3000`
- **ì ‘ê·¼ ê°€ëŠ¥**: í˜„ì¬ PCì—ì„œë§Œ

### NAS í™˜ê²½

#### ê°™ì€ ë„¤íŠ¸ì›Œí¬ ë‚´ ì ‘ê·¼

- **ë¸Œë¼ìš°ì €**: `http://192.168.0.100:3000`
- **ì ‘ê·¼ ê°€ëŠ¥**: ê°™ì€ WiFi/LANì˜ ëª¨ë“  ê¸°ê¸°
  - PC: `http://192.168.0.100:3000`
  - ìŠ¤ë§ˆíŠ¸í°: `http://192.168.0.100:3000`
  - íƒœë¸”ë¦¿: `http://192.168.0.100:3000`

#### ì™¸ë¶€ ì ‘ê·¼ (ì„ íƒ)

**QuickConnect ë˜ëŠ” DDNS ì„¤ì • í•„ìš”**

1. **DSM ì œì–´íŒ** â†’ **ì™¸ë¶€ ì•¡ì„¸ìŠ¤**
2. DDNS ì„¤ì •: `yourname.synology.me`
3. í¬íŠ¸ í¬ì›Œë”©: `3000` â†’ NAS IP
4. ì ‘ê·¼: `http://yourname.synology.me:3000`

---

## ğŸ“ NPM ìŠ¤í¬ë¦½íŠ¸ ì „ì²´ ëª©ë¡

| ëª…ë ¹ì–´ | ì„¤ëª… |
|--------|------|
| `npm run dev` | ê¸°ë³¸ ê°œë°œ ì„œë²„ (í˜„ì¬ .env ì‚¬ìš©) |
| `npm run dev:local` | localhost í™˜ê²½ìœ¼ë¡œ ê°œë°œ ì„œë²„ ì‹œì‘ |
| `npm run dev:nas` | NAS í™˜ê²½ìœ¼ë¡œ ê°œë°œ ì„œë²„ ì‹œì‘ (0.0.0.0 ë°”ì¸ë”©) |
| `npm run switch:local` | localhost í™˜ê²½ìœ¼ë¡œ ì „í™˜ (.env êµì²´) |
| `npm run switch:nas` | NAS í™˜ê²½ìœ¼ë¡œ ì „í™˜ (.env êµì²´) |
| `npm run build` | í”„ë¡œë•ì…˜ ë¹Œë“œ |
| `npm run start` | í”„ë¡œë•ì…˜ ì„œë²„ ì‹œì‘ (localhost) |
| `npm run start:nas` | í”„ë¡œë•ì…˜ ì„œë²„ ì‹œì‘ (NAS, 0.0.0.0) |

---

## ğŸ” íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### ë¬¸ì œ 1: NASì—ì„œ ì„œë²„ ì‹œì‘ ì•ˆë¨

**ì¦ìƒ**: `EADDRINUSE: address already in use`

**í•´ê²°**:
```bash
# í¬íŠ¸ ì‚¬ìš© í™•ì¸
netstat -tulpn | grep 3000

# í”„ë¡œì„¸ìŠ¤ ì¢…ë£Œ
kill -9 [PID]

# ë˜ëŠ” ë‹¤ë¥¸ í¬íŠ¸ ì‚¬ìš©
PORT=3001 npm run dev:nas
```

### ë¬¸ì œ 2: ë„¤íŠ¸ì›Œí¬ì—ì„œ ì ‘ê·¼ ë¶ˆê°€

**ì›ì¸**: ë°©í™”ë²½ ë˜ëŠ” ë°”ì¸ë”© ë¬¸ì œ

**í•´ê²°**:
1. `-H 0.0.0.0` ì˜µì…˜ í™•ì¸ (dev:nas ìŠ¤í¬ë¦½íŠ¸)
2. ë°©í™”ë²½ ê·œì¹™ í™•ì¸
3. NAS ì¬ì‹œì‘

```bash
# ìˆ˜ë™ìœ¼ë¡œ 0.0.0.0 ë°”ì¸ë”© í…ŒìŠ¤íŠ¸
next dev -H 0.0.0.0 -p 3000
```

### ë¬¸ì œ 3: í™˜ê²½ ë³€ìˆ˜ ì ìš© ì•ˆë¨

**ì›ì¸**: `.env` íŒŒì¼ ìºì‹±

**í•´ê²°**:
```bash
# .next í´ë” ì‚­ì œ
rm -rf .next

# ì¬ì‹œì‘
npm run dev:nas
```

### ë¬¸ì œ 4: NAS ì„±ëŠ¥ ì €í•˜

**ì›ì¸**: ë©”ëª¨ë¦¬ ë¶€ì¡± ë˜ëŠ” CPU ì œí•œ

**í•´ê²°**:
1. ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ í™•ì¸
```bash
free -h
```

2. í”„ë¡œë•ì…˜ ë¹Œë“œ ì‚¬ìš© (ê°œë°œ ì„œë²„ë³´ë‹¤ ë¹ ë¦„)
```bash
npm run build
npm run start:nas
```

3. NAS ìì› ê´€ë¦¬ìì—ì„œ ë‹¤ë¥¸ íŒ¨í‚¤ì§€ ì¤‘ì§€

### ë¬¸ì œ 5: Git ì¸ì¦ ë¬¸ì œ (NAS)

**ì›ì¸**: SSH í‚¤ ë¯¸ì„¤ì •

**í•´ê²°**:
```bash
# SSH í‚¤ ìƒì„±
ssh-keygen -t ed25519 -C "your_email@example.com"

# ê³µê°œ í‚¤ ë³µì‚¬
cat ~/.ssh/id_ed25519.pub

# GitHubì— SSH í‚¤ ë“±ë¡
# Settings â†’ SSH and GPG keys â†’ New SSH key
```

---

## ğŸ¯ ì¶”ì²œ ì›Œí¬í”Œë¡œìš°

### ì‹œë‚˜ë¦¬ì˜¤ A: ê°œì¸ ê°œë°œ

```bash
# Windows PCì—ì„œ
npm run dev:local

# ë¸Œë¼ìš°ì €: http://localhost:3000
```

### ì‹œë‚˜ë¦¬ì˜¤ B: íŒ€ í˜‘ì—…

```bash
# NASì—ì„œ ì„œë²„ ì‹¤í–‰
npm run dev:nas

# íŒ€ì›ë“¤ì€ ë¸Œë¼ìš°ì €ì—ì„œ ì ‘ê·¼
# http://192.168.0.100:3000
```

### ì‹œë‚˜ë¦¬ì˜¤ C: ëª¨ë°”ì¼ í…ŒìŠ¤íŠ¸

```bash
# NASì—ì„œ ì„œë²„ ì‹¤í–‰
npm run dev:nas

# ìŠ¤ë§ˆíŠ¸í°/íƒœë¸”ë¦¿ ë¸Œë¼ìš°ì €
# http://192.168.0.100:3000

# PWA ì„¤ì¹˜ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥
```

### ì‹œë‚˜ë¦¬ì˜¤ D: í”„ë¡œë•ì…˜ ë°°í¬ ì „ í…ŒìŠ¤íŠ¸

```bash
# NASì—ì„œ í”„ë¡œë•ì…˜ ë¹Œë“œ
npm run build
npm run start:nas

# ì‹¤ì œ í”„ë¡œë•ì…˜ í™˜ê²½ê³¼ ìœ ì‚¬í•˜ê²Œ í…ŒìŠ¤íŠ¸
```

---

## ğŸ“Š ì„±ëŠ¥ ë¹„êµ

| í™˜ê²½ | ë¹Œë“œ ì†ë„ | í•« ë¦¬ë¡œë“œ | ì•ˆì •ì„± | ì ‘ê·¼ì„± |
|------|-----------|-----------|--------|--------|
| **localhost** | âš¡âš¡âš¡ ë¹ ë¦„ | âš¡âš¡âš¡ ì¦‰ì‹œ | â­â­â­ ë†’ìŒ | ğŸ  ë¡œì»¬ë§Œ |
| **NAS Dev** | âš¡âš¡ ë³´í†µ | âš¡âš¡ ì•½ê°„ ëŠë¦¼ | â­â­ ë³´í†µ | ğŸŒ ë„¤íŠ¸ì›Œí¬ ì „ì²´ |
| **NAS Prod** | âš¡âš¡âš¡ ë¹ ë¦„ | âŒ ì—†ìŒ | â­â­â­ ë†’ìŒ | ğŸŒ ë„¤íŠ¸ì›Œí¬ ì „ì²´ |

---

## ğŸ”’ ë³´ì•ˆ ê¶Œì¥ì‚¬í•­

1. **ë°©í™”ë²½ ì„¤ì •**: LANë§Œ í—ˆìš©, ì™¸ë¶€ ì ‘ê·¼ ìµœì†Œí™”
2. **HTTPS ì‚¬ìš©**: Reverse Proxy (Nginx) ì„¤ì •
3. **ì¸ì¦ ì¶”ê°€**: ê°œë°œ ì„œë²„ì— Basic Auth ì ìš©
4. **í™˜ê²½ ë³€ìˆ˜ ë³´í˜¸**: `.env` íŒŒì¼ ê¶Œí•œ ì„¤ì •

```bash
# .env íŒŒì¼ ê¶Œí•œ ì„¤ì • (NAS)
chmod 600 .env.nas
chmod 600 .env.local
```

---

## ğŸ“š ì¶”ê°€ ìë£Œ

- [Next.js Deployment Docs](https://nextjs.org/docs/deployment)
- [Synology DSM ì‚¬ìš©ì ê°€ì´ë“œ](https://www.synology.com/support/documentation)
- [Node.js NAS ì„¤ì¹˜ ê°€ì´ë“œ](https://github.com/synology/node)

---

## ğŸ’¡ íŒ

1. **ìë™ ì‹œì‘**: NAS Task Schedulerë¡œ ë¶€íŒ… ì‹œ ìë™ ì‹¤í–‰
2. **ë¡œê·¸ í™•ì¸**: `npm run dev:nas > /tmp/nextjs.log 2>&1 &`
3. **í¬íŠ¸ ë³€ê²½**: `PORT=3001 npm run dev:nas`
4. **í™˜ê²½ í™•ì¸**: `echo $NEXT_PUBLIC_API_URL`

---

## âœ… ì²´í¬ë¦¬ìŠ¤íŠ¸

### NAS ì´ˆê¸° ì„¤ì •
- [ ] Node.js 18+ ì„¤ì¹˜
- [ ] í”„ë¡œì íŠ¸ ë³µì‚¬ (Git clone)
- [ ] `npm install` ì™„ë£Œ
- [ ] `.env.nas` íŒŒì¼ ìˆ˜ì • (NAS IP)
- [ ] ë°©í™”ë²½ í¬íŠ¸ 3000 ê°œë°©
- [ ] Task Scheduler ìë™ ì‹œì‘ ì„¤ì •

### ì¼ìƒ ì‚¬ìš©
- [ ] ë¡œì»¬ ê°œë°œ: `npm run dev:local`
- [ ] NAS ê°œë°œ: `npm run dev:nas`
- [ ] í™˜ê²½ ì „í™˜: `npm run switch:local` ë˜ëŠ” `npm run switch:nas`

---

**ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸**: 2025-10-09
**ì‘ì„±ì**: gram (y0163824619@gmail.com)
